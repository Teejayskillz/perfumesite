{% for perfume in perfumes %}
<a href="{% url 'perfume_detail' perfume.pk %}" class="block hover:bg-gray-800 transition duration-150 ease-in-out rounded-lg">
  <div class="bg-gray-900 text-white p-4 rounded-lg mb-4 flex gap-4">
    {% if perfume.image %}
      <img src="{{ perfume.image.url }}" alt="{{ perfume.name }}" class="w-20 h-20 object-cover rounded">
    {% elif perfume.image_url %}
      <img src="{{ perfume.image_url }}" alt="{{ perfume.name }}" class="w-20 h-20 object-cover rounded">
    {% endif %}
    <div>
      <h2 class="font-bold text-lg">{{ perfume.name }}</h2>
      <p class="text-gray-400">{{ perfume.brand }} • {{ perfume.country }}</p>
      <p class="text-yellow-400">⭐ {{ perfume.rating_value|default:"–" }}</p>
      <p class="text-gray-500 text-sm">{{ perfume.mainaccord1 }}, {{ perfume.mainaccord2 }}</p>
    </div>
  </div>
</a>
{% empty %}
<p class="text-gray-500 text-center py-8 col-span-full">No perfumes found for these filters.</p>
{% endfor %}

{% if perfumes.has_next %}
  <div 
    hx-get="?page={{ perfumes.next_page_number }}"
    hx-trigger="revealed"
    hx-swap="afterend"
    hx-target="this"
    class="flex justify-center py-8"
  >
    <div class="flex flex-col items-center">
      <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-yellow-400 mb-2"></div>
      <p class="text-gray-400 text-sm">Loading more perfumes...</p>
    </div>
  </div>
{% endif %}
